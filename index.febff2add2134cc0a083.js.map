{"version":3,"sources":["webpack:///./js/movie.js","webpack:///./js/settings.js","webpack:///./js/helpers.js","webpack:///./js/movie-pagination.js","webpack:///./index.js","webpack:///./templates/movieCard.hbs"],"names":["BASE_URL","API_KEY","api","fetchPopular","page","fetch","then","rawData","json","POSTER_URL","MoviePagination","selector","this","element","document","querySelector","currentPage","totalPages","goToPrevPage","bind","goToNextPage","loadMore","fetchMovies","results","movies","convertMoviesData","addMovies","newMovies","movieList","map","movie","movieAdapter","movieApi","total_pages","mount","render","markup","forEach","id","imgSrc","title","genre","releaseYear","rating","innerHTML","console","log","error","imageName","poster_path","genre_ids","release_date","original_title","overview","popularity","vote_avarage","vote_count","prevButtonRef","nextButtonRef","addEventListener","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"index.febff2add2134cc0a083.js","sourcesContent":["import setting from './settings.js';\r\n\r\nconst { BASE_URL, API_KEY } = setting;\r\n\r\nconst api = {\r\n  fetchPopular(page = '') {\r\n    const url = `${BASE_URL}/movie/popular?api_key=${API_KEY}&page=${page}`;\r\n\r\n    return fetch(url).then(rawData => rawData.json());\r\n  },\r\n};\r\n\r\nexport default api;\r\n","export default {\r\n  BASE_URL: 'https://api.themoviedb.org/3',\r\n  API_KEY: 'a11681fbc130343b10afc879742afe20',\r\n  POSTER_URL: 'https://www.themoviedb.org/t/p/w220_and_h330_face',\r\n};\r\n// https://apt-booking-api.herokuapp.com\r\n","import settings from './settings.js';\r\nconst { POSTER_URL } = settings;\r\n\r\nexport const generatePosterPath = imageName => `${POSTER_URL}${imageName}`;\r\n","import movieCardTpl from '../templates/movieCard.hbs';\r\nimport movieApi from './movie';\r\nimport { generatePosterPath } from './helpers';\r\n\r\nclass MoviePagination {\r\n  #movies = [];\r\n\r\n  constructor(selector) {\r\n    this.element = document.querySelector(selector);\r\n    this.#movies = [];\r\n    this.currentPage = 1;\r\n    this.totalPages = 0;\r\n    this.goToPrevPage = this.goToPrevPage.bind(this);\r\n    this.goToNextPage = this.goToNextPage.bind(this);\r\n    this.loadMore = this.loadMore.bind(this);\r\n  }\r\n\r\n  get movies() {\r\n    return this.#movies;\r\n  }\r\n\r\n  set movies(movieList) {\r\n    if (!movieList) {\r\n      console.error('Где список фильмов?');\r\n    }\r\n\r\n    this.#movies = movieList;\r\n    this.render();\r\n  }\r\n\r\n  goToPrevPage() {\r\n    if (this.currentPage === 1) {\r\n      return;\r\n    }\r\n\r\n    this.currentPage -= 1;\r\n    this.fetchMovies().then(({ results }) => {\r\n      this.movies = this.convertMoviesData(results);\r\n    });\r\n  }\r\n\r\n  goToNextPage() {\r\n    if (this.currentPage === this.totalPages) {\r\n      return;\r\n    }\r\n\r\n    this.currentPage += 1;\r\n    this.fetchMovies().then(({ results }) => {\r\n      this.movies = this.convertMoviesData(results);\r\n    });\r\n  }\r\n\r\n  loadMore() {\r\n    this.currentPage += 1;\r\n    return this.fetchMovies().then(({ results }) => {\r\n      this.addMovies(this.convertMoviesData(results));\r\n    });\r\n  }\r\n\r\n  addMovies(newMovies) {\r\n    this.movies = [...this.movies, ...newMovies];\r\n  }\r\n\r\n  convertMoviesData(movieList) {\r\n    return movieList.map(movie => movieAdapter(movie));\r\n  }\r\n\r\n  fetchMovies() {\r\n    return movieApi\r\n      .fetchPopular(this.currentPage)\r\n      .then(({ results, total_pages }) => ({ results, total_pages }));\r\n  }\r\n\r\n  mount() {\r\n    this.fetchMovies().then(({ results, total_pages }) => {\r\n      this.movies = this.convertMoviesData(results);\r\n      this.totalPages = total_pages;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // this.element.innerHTML = movieCardTpl(this.movies);\r\n    let markup = [];\r\n    this.movies.forEach(movie => {\r\n      markup += `\r\n      <li id=\"${movie.id}\" class=\"movies__card\">\r\n        <div class=\"movies__thumb\">\r\n          <img class=\"img movies__img\" src=\"${movie.imgSrc}\" alt=\"Постер фильма\">\r\n        </div>\r\n        <div class=\"movies__content\">\r\n          <h2 class=\"movies__title\">${movie.title}</h2>\r\n          <p class=\"movies__description\">\r\n            ${movie.genre} | ${movie.releaseYear}\r\n            <span class=\"movies__rating\">${movie.rating}</span>\r\n          </p>\r\n        </div>\r\n      </li>\r\n      `;\r\n    });\r\n\r\n    this.element.innerHTML = markup;\r\n    console.log(markup);\r\n  }\r\n}\r\n\r\nconst movieAdapter = ({\r\n  id,\r\n  poster_path,\r\n  genre_ids,\r\n  original_title,\r\n  overview,\r\n  popularity,\r\n  release_date,\r\n  title,\r\n  vote_avarage,\r\n  vote_count,\r\n}) => ({\r\n  id: id,\r\n  imgSrc: generatePosterPath(poster_path),\r\n  title: title,\r\n  genre: genre_ids,\r\n  releaseYear: release_date,\r\n  rating: vote_avarage,\r\n});\r\n\r\nexport default MoviePagination;\r\n","import './sass/main.scss';\r\nimport MoviePagination from './js/movie-pagination.js';\r\n\r\nconst movies = new MoviePagination('.movies__list');\r\n\r\nconst prevButtonRef = document.querySelector('.button--prev');\r\nconst nextButtonRef = document.querySelector('.button--next');\r\n\r\nprevButtonRef.addEventListener('click', movies.goToPrevPage);\r\nnextButtonRef.addEventListener('click', movies.goToNextPage);\r\n\r\nmovies.mount();\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":8},\"end\":{\"line\":2,\"column\":14}}}) : helper)))\n    + \"\\\" class=\\\"movies__card\\\">\\r\\n  <div class=\\\"movies__thumb\\\">\\r\\n    <img class=\\\"img movies__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":38},\"end\":{\"line\":4,\"column\":48}}}) : helper)))\n    + \"\\\" alt=\\\"Постер фильма\\\">\\r\\n  </div>\\r\\n  <div class=\\\"movies__content\\\">\\r\\n    <h2 class=\\\"movies__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":30},\"end\":{\"line\":7,\"column\":39}}}) : helper)))\n    + \"</h2>\\r\\n    <p class=\\\"movies__description\\\">\\r\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre\") || (depth0 != null ? lookupProperty(depth0,\"genre\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":6},\"end\":{\"line\":9,\"column\":15}}}) : helper)))\n    + \" | \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseYear\") || (depth0 != null ? lookupProperty(depth0,\"releaseYear\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseYear\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":18},\"end\":{\"line\":9,\"column\":33}}}) : helper)))\n    + \"\\r\\n      <span class=\\\"movies__rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"rating\") || (depth0 != null ? lookupProperty(depth0,\"rating\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rating\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":35},\"end\":{\"line\":10,\"column\":45}}}) : helper)))\n    + \"</span>\\r\\n    </p>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":14,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}